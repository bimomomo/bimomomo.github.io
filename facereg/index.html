<html>
    <head>
        <title>Face App</title>
		<link href=
"https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
            rel="stylesheet">
  
    <script src=
"https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" 
    type="text/javascript">
  
    </script>
  
    <script src=
"https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js">
    </script>
        <style>
        #overlay, .overlay {
				position: absolute;
				top: 0;
				left: 0;
            }
			.booth{
				width:60%;
				height:50%;
				background:#ccc;
				border:10px solid #ddd;
				margin: 0px auto;
			}
			#originalImg {
				position: fixed;
				top: 0;
				left: 0;
				width: 100vw;
				height: auto;
				max-width: 100vw;
				max-height: 100vh;
			}
        </style>
    </head>
    <body>
		<span id="desc" class="float-right"></span>
		<br>

			<video id="originalImg" width="320" height="320" autoplay></video>
			<canvas id="reflay" class="overlay"></canvas>

		<div class="text-right">
			<a href="#!" class="btn btn-danger" 
				onClick="stop()">
				Stop Cam
			</a>
			<a href="#!" class="btn btn-success"
				onClick="start()">
				Start Cam
			</a>
			<button class="btn btn-primary" onClick="askPermission()">Access</button>
		</div>

        <script src="./js/jquery-2.1.1.min.js"></script>
        <script src="./js/face-api.min.js"></script>
        <script src="./js/faceSystem.js"></script>
		<script class="this-is-the-Ai">

			// async function runfreg(){
			// 	await face()
			// 	await setTimeout(async () => await runfreg(),5000)
			// }

			// async function face(){
			// 	console.log('work')
				

			// 	const img= document.getElementById('originalImg')
			// 	let faceDescriptions = await faceapi.detectAllFaces(img).withFaceLandmarks().withFaceDescriptors().withFaceExpressions()
			// 	const canvas = $('#reflay').get(0)
			// 	faceapi.matchDimensions(canvas, img)

			// 	faceDescriptions = faceapi.resizeResults(faceDescriptions, img)
			// 	faceapi.draw.drawDetections(canvas, faceDescriptions)
			// 	faceapi.draw.drawFaceLandmarks(canvas, faceDescriptions)
			// 	faceapi.draw.drawFaceExpressions(canvas, faceDescriptions)

			// }
		</script>
		<script>
			function stop() {
				var stream = video.srcObject;
				var tracks = stream.getTracks();

				for (var i = 0; i < tracks.length; i++) {
					var track = tracks[i];
					track.stop();
				}
				video.srcObject = null;
			}

			async function start() {
				var video = document.getElementById("originalImg"), vendorURL = window.URL || window.webkitURL;

				if (navigator.mediaDevices.getUserMedia) {
					navigator.mediaDevices.getUserMedia({ audio: false, video: { facingMode: "user" ,video: { frameRate: { ideal: 10, max: 15 } }} })
						.then(function (stream) {
							video.srcObject = stream;
							face()
						}).catch(function (error) {
							console.log("Something went wrong");
							console.log(error)
						});
				}
			}
			$(function () {
				$('.overlay').width($('#originalImg').width());
				$('.overlay').height($('#originalImg').height());
				start(); 
			});
			$(window).resize(function () {
				$('.overlay').width($('#originalImg').width());
				$('.overlay').height($('#originalImg').height());
			});
		</script>
    </body>
</html>



